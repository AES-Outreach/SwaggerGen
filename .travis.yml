#safelist
branches:
  only:
      - master
      - develop
sudo : false
language: java
jdk:
  - openjdk11
node_js: "10"
install: "npm install -g swagger-cli"
cache:
    directories:
        - $HOME/.m2
jobs: 
  include: 
    - stage: compile
      before_script:
        - cd swaggen
      script:
        - mvn -U -s ../assets/settings.xml clean install
        - mvn javadoc:javadoc -s ../assets/settings.xml
    - stage: sample
      before_script:
        - cd sample-project
      script:
        - mvn clean install
    - stage: test
      before_script:
        - cd sample-project/generated/swagger
      script:
        - swagger-cli validate TestYaml.yaml
stages: 
  - name: compile
  - name: sample
  - name: test
notifications:
  slack: swaggen:Ykqb64SVX8bgvp5ZDi9KcJ3A 
